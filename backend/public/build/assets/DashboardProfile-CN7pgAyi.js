import{_ as E,r as k,E as A,h as D,c as d,a,t,b as c,G as u,v as m,d as n,w as N,o as i,S as X}from"./app-BOhBFs9K.js";/* empty css            */const j={class:"my-2"},F={class:"d-block mb-2 mb-lg-3 fs-4 fw-bold"},L={class:"row flex-column-reverse flex-md-row mb-4 bg-white rounded-3 py-3 px-1 theme-shadow"},M={class:"col-md-6"},R={class:"p-4 rounded"},T={class:"mb-3"},z={class:"form-label fs-5"},G=["placeholder"],H={key:0,class:"my-2 text-danger"},I={class:"mb-3"},O={class:"form-label fs-5"},q={key:0,class:"my-2 text-danger"},J={class:"mb-3"},K={class:"form-label fs-5"},Q={key:0,class:"my-2 text-danger"},W={class:"mb-3"},Y={class:"form-label fs-5"},Z=["placeholder"],ee={key:0,class:"my-2 text-danger"},se={class:"mb-3"},oe={class:"form-label fs-5"},ae=["placeholder"],te={key:0,class:"my-2 text-danger"},le={class:"mb-3"},re={class:"form-label fs-5"},ne=["placeholder"],de={class:"col-md-6 mb-5 mb-md-0"},ie={class:"theme-shadow p-5 rounded d-flex h-100 align-items-center"},pe={class:"w-100"},ce=["src"],ue={for:"upload-pp",class:"upload-pp-btn btn btn-outline-primary border-2 w-100"},me={key:0,class:"my-2 text-danger"},fe={type:"submit",class:"btn btn-primary w-100"},he={__name:"DashboardProfile",setup(_e){let l=k("");const p=A();let x=k("");const s=k({name:p.userData.name,phone:p.userData.phone,email:p.userData.email,current_password:null,password:null,password_confirmation:null,profile_picture:null});D(()=>s.value.name,o=>{o&&(l.value.name="")}),D(()=>s.value.email,o=>{o&&(l.value.email="")}),D(()=>s.value.phone,o=>{o&&(l.value.phone="")}),D(()=>s.value.password,o=>{o&&(l.value.password="")}),D(()=>s.value.current_password,o=>{o&&(x.value="")});const S=async()=>{var o,r,f,h,_,w,v,b,g,y,P,$;try{let e=new FormData;e.append("name",s.value.name),e.append("phone",s.value.phone),s.value.profile_picture&&e.append("profile_picture",s.value.profile_picture),(s.value.current_password||s.value.password||s.value.password_confirmation)&&(e.append("current_password",s.value.current_password),e.append("password",s.value.password),e.append("password_confirmation",s.value.password_confirmation)),s.value.email&&e.append("email",s.value.email);const C=await axios.post("/profile/update",e,{headers:{Accept:"application/json",Authorization:"Bearer "+p.authToken}});p.setAuthData(C.data.data.token,C.data.data.user),X.fire({icon:"success",title:"Success",text:"Profile updated successfully",showConfirmButton:!1,timer:1500})}catch(e){(f=(r=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:r.data)!=null&&f.current_password_error&&(x.value=(w=(_=(h=e==null?void 0:e.response)==null?void 0:h.data)==null?void 0:_.data)==null?void 0:w.current_password_error),l.value=(b=(v=e==null?void 0:e.response)==null?void 0:v.data)==null?void 0:b.errors,X.fire({icon:"error",title:"Error",text:e.response.data.message,showConfirmButton:!1,timer:1500}),(y=(g=e==null?void 0:e.response)==null?void 0:g.data)!=null&&y.access_denied&&X.fire({icon:"error",title:"Access Denied",text:($=(P=e==null?void 0:e.response)==null?void 0:P.data)==null?void 0:$.access_denied,showConfirmButton:!1,timer:3500})}},U=k(!1);let V=k(!1);const B=o=>{U.value=URL.createObjectURL(o.target.files[0]),s.value.profile_picture=o.target.files[0],V.value=!0};return(o,r)=>{var f,h,_,w,v,b,g,y,P,$;return i(),d("section",j,[a("span",F,t(o.$t("Home"))+"/"+t(o.$t("Profile")),1),a("form",{onSubmit:N(S,["prevent"])},[a("div",L,[a("div",M,[a("div",R,[a("div",T,[a("label",z,t(o.$t("Name")),1),c(a("input",{type:"text",class:"form-control bg-light border-0",placeholder:o.$t("Full Name"),"onUpdate:modelValue":r[0]||(r[0]=e=>s.value.name=e)},null,8,G),[[m,s.value.name]]),(f=n(l))!=null&&f.name?(i(),d("p",H,t((h=n(l))==null?void 0:h.name[0]),1)):u("",!0)]),a("div",I,[a("label",O,t(o.$t("Phone")),1),c(a("input",{type:"tel",class:"form-control bg-light border-0",placeholder:"+8801XXXXXXXXX","onUpdate:modelValue":r[1]||(r[1]=e=>s.value.phone=e)},null,512),[[m,s.value.phone]]),(_=n(l))!=null&&_.phone?(i(),d("p",q,t((w=n(l))==null?void 0:w.phone[0]),1)):u("",!0)]),a("div",J,[a("label",K,t(o.$t("Email")),1),c(a("input",{autocomplete:"username",type:"text",class:"form-control bg-light border-0",placeholder:"user@example.com","onUpdate:modelValue":r[2]||(r[2]=e=>s.value.email=e)},null,512),[[m,s.value.email]]),(v=n(l))!=null&&v.email?(i(),d("p",Q,t((b=n(l))==null?void 0:b.email[0]),1)):u("",!0)]),a("div",W,[a("label",Y,t(o.$t("Current Password")),1),c(a("input",{autocomplete:"current-password",type:"password",class:"form-control bg-light border-0",placeholder:o.$t("Enter current password to change"),"onUpdate:modelValue":r[3]||(r[3]=e=>s.value.current_password=e)},null,8,Z),[[m,s.value.current_password]]),n(x)?(i(),d("p",ee,t(n(x)),1)):u("",!0)]),a("div",se,[a("label",oe,t(o.$t("Password")),1),c(a("input",{autocomplete:"new-password",type:"password",class:"form-control bg-light border-0",placeholder:o.$t("Enter new password to change"),"onUpdate:modelValue":r[4]||(r[4]=e=>s.value.password=e)},null,8,ae),[[m,s.value.password]]),(g=n(l))!=null&&g.password?(i(),d("p",te,t((y=n(l))==null?void 0:y.password[0]),1)):u("",!0)]),a("div",le,[a("label",re,t(o.$t("Confirm Password")),1),c(a("input",{autocomplete:"new-password",type:"password",class:"form-control bg-light border-0",placeholder:o.$t("Confirm new password"),"onUpdate:modelValue":r[5]||(r[5]=e=>s.value.password_confirmation=e)},null,8,ne),[[m,s.value.password_confirmation]])])])]),a("div",de,[a("div",ie,[a("div",pe,[a("img",{src:U.value?U.value:n(p).userData.profile_picture,alt:"Profile picture",height:"250px",width:"250px",class:"rounded-circle mx-auto object-fit-cover d-block border border-3 border-primary mb-4"},null,8,ce),a("input",{id:"upload-pp",type:"file",class:"d-none",onChange:B},null,32),a("label",ue,t(o.$t("Upload image")),1),(P=n(l))!=null&&P.profile_picture?(i(),d("p",me,t(($=n(l))==null?void 0:$.profile_picture[0]),1)):u("",!0)])])])]),a("button",fe,t(o.$t("Save")),1)],32)])}}},be=E(he,[["__scopeId","data-v-19dfa9c2"]]);export{be as default};
